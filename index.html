<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Memory Animals</title>

  <style>
    :root{
      --bg:#f6f7fb;
      --cardBack:#222;
      --cardBorder:#e7e7ee;
      --text:#111;
      --muted:#666;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      text-align:center;
    }
    header{
      background:#fff;
      padding:14px 12px;
      box-shadow:0 2px 10px rgba(0,0,0,.06);
      position:sticky;
      top:0;
      z-index:10;
    }
    h1{margin:0 0 10px; font-size:28px}
    .bar{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
      align-items:center;
    }
    .chip{
      background:#fff;
      border:1px solid var(--cardBorder);
      padding:10px 12px;
      border-radius:14px;
      font-size:14px;
      min-width:140px;
    }
    .btn{
      padding:10px 14px;
      border-radius:14px;
      border:1px solid #ddd;
      background:#fff;
      cursor:pointer;
      font-weight:600;
    }
    .btn.primary{
      background:#111;
      color:#fff;
      border-color:#111;
    }
    .btn:disabled{
      opacity:.5;
      cursor:not-allowed;
    }
    main{
      max-width:980px;
      margin:14px auto;
      padding:0 12px 30px;
    }

    .grid{
      display:grid;
      gap:10px;
      justify-content:center;
      margin-top:14px;
    }

    /* Responsive card size: 68‚Äì110px */
    .card{
      width: min(110px, calc((100vw - 70px)/4));
      height: min(110px, calc((100vw - 70px)/4));
      border-radius:16px;
      border:1px solid var(--cardBorder);
      background:var(--cardBack);
      cursor:pointer;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
    }
    @media (min-width: 720px){
      .card{
        width:100px;
        height:100px;
      }
    }

    .card img{
      width:100%;
      height:100%;
      object-fit:contain;
      background:#fff;
      display:none;
      padding:8px;
    }
    .card.flipped{
      background:#fff;
    }
    .card.flipped img{display:block;}
    .card.matched{
      outline:3px solid rgba(0,0,0,.25);
      cursor:default;
    }

    .panel{
      background:#fff;
      border:1px solid var(--cardBorder);
      border-radius:18px;
      padding:14px;
      margin-top:12px;
      text-align:left;
      max-width:720px;
      margin-left:auto;
      margin-right:auto;
    }
    .panel h2{margin:0 0 8px; font-size:18px}
    .panel p{margin:6px 0; color:var(--muted)}
    .levels{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .levelBtn{
      padding:10px 12px;
      border-radius:14px;
      border:1px solid #ddd;
      background:#fff;
      cursor:pointer;
      font-weight:700;
    }
    .levelBtn.active{
      border-color:#111;
      box-shadow:0 2px 8px rgba(0,0,0,.08);
    }

    .modal{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.45);
      display:none;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:50;
    }
    .modal .box{
      background:#fff;
      border-radius:18px;
      padding:16px;
      width:min(420px, 100%);
      text-align:left;
    }
    .modal h3{margin:0 0 8px}
    .modal p{margin:6px 0; color:var(--muted)}
    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
      justify-content:flex-start;
    }
    .link{
      text-decoration:none;
      color:#111;
      border:1px solid #ddd;
      padding:10px 14px;
      border-radius:14px;
      display:inline-block;
      font-weight:700;
      background:#fff;
    }
  </style>
</head>

<body>
  <header>
    <h1>üß† Memory Animals</h1>

    <div class="bar">
      <div class="chip">Level: <b id="levelName">Easy</b></div>
      <div class="chip">Time: <b id="time">0</b>s</div>
      <div class="chip">Moves: <b id="moves">0</b></div>

      <button class="btn primary" id="startBtn">Start</button>
      <button class="btn" id="restartBtn">Restart</button>

      <!-- ÿ∂ÿπŸëŸä ÿ±ÿßÿ®ÿ∑ŸÉ ŸÑÿßÿ≠ŸÇŸãÿß (Gumroad/BuyMeACoffee) -->
      <a class="link" id="supportLink" href="https://buymeacoffee.com/" target="_blank" rel="noopener">
        ‚ù§Ô∏è Support ($1)
      </a>
    </div>
  </header>

  <main>
    <div class="panel">
      <h2>Choose a level</h2>
      <p>Levels start with fewer animals, then increase. This makes the game more fun and addictive ‚úÖ</p>

      <div class="levels" id="levels"></div>

      <p style="margin-top:10px"><b>Tip:</b> Watch how quickly players can replay levels ‚Äî that‚Äôs perfect for monetization later.</p>
    </div>

    <div id="grid" class="grid"></div>
  </main>

  <div id="modal" class="modal">
    <div class="box">
      <h3>üéâ Great job!</h3>
      <p id="winText">You completed the level.</p>
      <div class="row">
        <button class="btn primary" id="nextBtn">Next level</button>
        <button class="btn" id="playAgainBtn">Play again</button>
        <a class="link" href="https://buymeacoffee.com/" target="_blank" rel="noopener">Support</a>
      </div>
    </div>
  </div>

<script>
  // We have 12 images: assets/a1.png ... assets/a12.png
  const ALL_IMAGES = Array.from({length: 12}, (_, i) => `assets/a${i+1}.png`);

  // Level design: fewer pairs first, then more
  const LEVELS = [
    { key: "easy",   name: "Easy",   pairs: 6,  cols: 4 }, // 12 cards
    { key: "normal", name: "Normal", pairs: 8,  cols: 4 }, // 16 cards
    { key: "hard",   name: "Hard",   pairs: 10, cols: 5 }, // 20 cards
    { key: "pro",    name: "Pro",    pairs: 12, cols: 6 }, // 24 cards
  ];

  const gridEl = document.getElementById("grid");
  const levelsEl = document.getElementById("levels");
  const levelNameEl = document.getElementById("levelName");
  const timeEl = document.getElementById("time");
  const movesEl = document.getElementById("moves");

  const startBtn = document.getElementById("startBtn");
  const restartBtn = document.getElementById("restartBtn");

  const modal = document.getElementById("modal");
  const nextBtn = document.getElementById("nextBtn");
  const playAgainBtn = document.getElementById("playAgainBtn");
  const winText = document.getElementById("winText");

  let currentLevelIndex = 0;
  let started = false;

  let timer = null;
  let seconds = 0;
  let moves = 0;

  let firstCard = null;
  let lock = false;
  let matchedPairs = 0;

  function shuffle(arr){
    for(let i = arr.length - 1; i > 0; i--){
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  function stopTimer(){
    if(timer){ clearInterval(timer); timer = null; }
  }

  function resetStats(){
    stopTimer();
    seconds = 0;
    moves = 0;
    matchedPairs = 0;
    firstCard = null;
    lock = false;
    started = false;

    timeEl.textContent = seconds;
    movesEl.textContent = moves;
  }

  function startTimer(){
    if(timer) return;
    timer = setInterval(() => {
      seconds++;
      timeEl.textContent = seconds;
    }, 1000);
  }

  function buildDeck(level){
    const picks = ALL_IMAGES.slice(0, level.pairs);
    const deck = shuffle([...picks, ...picks]);
    return deck;
  }

  function setGrid(cols){
    gridEl.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
    // keep it pretty on small screens: cap width
    const maxWidth = cols * 110 + (cols - 1) * 10;
    gridEl.style.maxWidth = Math.min(maxWidth, 980) + "px";
    gridEl.style.marginLeft = "auto";
    gridEl.style.marginRight = "auto";
  }

  function renderLevel(){
    const level = LEVELS[currentLevelIndex];
    levelNameEl.textContent = level.name;

    // UI: highlight current level
    [...levelsEl.querySelectorAll(".levelBtn")].forEach((b, idx) => {
      b.classList.toggle("active", idx === currentLevelIndex);
    });

    resetStats();
    modal.style.display = "none";

    setGrid(level.cols);
    gridEl.innerHTML = "";

    const deck = buildDeck(level);

    deck.forEach((src) => {
      const card = document.createElement("button");
      card.type = "button";
      card.className = "card";
      card.dataset.src = src;

      const img = document.createElement("img");
      img.alt = "animal";
      img.src = src;

      card.appendChild(img);
      card.addEventListener("click", () => onFlip(card));

      gridEl.appendChild(card);
    });

    // Start button is required to begin (nice for levels)
    startBtn.disabled = false;
  }

  function onFlip(card){
    if(lock) return;
    if(card.classList.contains("matched")) return;
    if(card === firstCard) return;

    // require pressing Start
    if(!started) return;

    startTimer();
    card.classList.add("flipped");

    if(!firstCard){
      firstCard = card;
      return;
    }

    moves++;
    movesEl.textContent = moves;

    const a = firstCard.dataset.src;
    const b = card.dataset.src;

    if(a === b){
      firstCard.classList.add("matched");
      card.classList.add("matched");
      matchedPairs++;
      firstCard = null;

      const level = LEVELS[currentLevelIndex];
      if(matchedPairs === level.pairs){
        stopTimer();
        const nextLevelName = LEVELS[currentLevelIndex + 1]?.name;
        winText.textContent = nextLevelName
          ? `You finished ${level.name}! Next: ${nextLevelName}.`
          : `You finished ${level.name}! You're a Pro!`;
        nextBtn.disabled = !nextLevelName;
        modal.style.display = "flex";
      }
    } else {
      lock = true;
      setTimeout(() => {
        card.classList.remove("flipped");
        firstCard.classList.remove("flipped");
        firstCard = null;
        lock = false;
      }, 650);
    }
  }

  function startGame(){
    // flip all down (in case user pressed start again)
    [...gridEl.querySelectorAll(".card")].forEach(c => {
      c.classList.remove("flipped");
      c.classList.remove("matched");
    });
    resetStats();
    started = true;
    startBtn.disabled = true;
  }

  function nextLevel(){
    if(currentLevelIndex < LEVELS.length - 1){
      currentLevelIndex++;
      renderLevel();
    }
  }

  // build level buttons
  function buildLevelButtons(){
    levelsEl.innerHTML = "";
    LEVELS.forEach((lvl, idx) => {
      const b = document.createElement("button");
      b.className = "levelBtn";
      b.textContent = `${lvl.name} ‚Ä¢ ${lvl.pairs} pairs`;
      b.addEventListener("click", () => {
        currentLevelIndex = idx;
        renderLevel();
      });
      levelsEl.appendChild(b);
    });
  }

  // events
  startBtn.addEventListener("click", startGame);
  restartBtn.addEventListener("click", renderLevel);
  nextBtn.addEventListener("click", () => { modal.style.display = "none"; nextLevel(); });
  playAgainBtn.addEventListener("click", () => { modal.style.display = "none"; renderLevel(); });

  // init
  buildLevelButtons();
  renderLevel();
</script>
</body>
</html>

